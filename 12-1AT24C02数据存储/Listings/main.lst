C51 COMPILER V9.54   MAIN                                                                  11/24/2025 18:11:29 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <STC89C5xRC.H>
   2          #include "KEY.h"
   3          #include "LCD1602.h"
   4          #include "Delay.h"
   5          #include "AT24C02.h"
   6          
   7          //unsigned char KeyNum;
   8          //unsigned int Num;
   9          //void main()
  10          //{     
  11          //      LCD_Init();
  12          //      LCD_ShowNum(1,1,Num,5);
  13          //      while(1)
  14          //      {
  15          //              
  16          //              KeyNum=Key();
  17          //              if(KeyNum==1)
  18          //              {       
  19          //                      Num++;
  20          //                      LCD_ShowNum(1,1,Num,5);
  21          //              }
  22          //              if(KeyNum==2)
  23          //              {       
  24          //                      Num--;
  25          //                      LCD_ShowNum(1,1,Num,5);
  26          //              }
  27          //                      if(KeyNum==3)
  28          //              {       
  29          //                      AT24C02_WriteByte(0,Num%256);//因为At24C02存入的是一个字节。Num是两个字节（int）在
             -KEil中。
  30          //                      Delay(5);
  31          //                      AT24C02_WriteByte(1,Num/256);
  32          //                      Delay(5);
  33          //                      LCD_ShowString(2,1,"write OK");
  34          //                      Delay(1000);
  35          //                      LCD_ShowString(2,1,"        ");
  36          //                      
  37          //              }
  38          //                      if(KeyNum==4)
  39          //              {       
  40          //                      
  41          //                      Num=AT24C02_ReadByte(0);
  42          //                      Num=AT24C02_ReadByte(1)<<8;
  43          //                      LCD_ShowNum(1,1,Num,5);
  44          //                      LCD_ShowString(2,1,"Read  OK");
  45          //                      Delay(1000);
  46          //                      LCD_ShowString(2,1,"        ");
  47          //              }
  48          //      }
  49          
  50          //}
  51          unsigned char KeyNum;
  52          unsigned int Num;
  53          
C51 COMPILER V9.54   MAIN                                                                  11/24/2025 18:11:29 PAGE 2   

  54          void main()
  55          {
  56   1              LCD_Init();
  57   1              LCD_ShowNum(1,1,Num,5);
  58   1              while(1)
  59   1              {
  60   2                      KeyNum=Key();
  61   2                      if(KeyNum==1)   //K1按键，Num自增
  62   2                      {
  63   3                              Num++;
  64   3                              LCD_ShowNum(1,1,Num,5);
  65   3                      }
  66   2                      if(KeyNum==2)   //K2按键，Num自减
  67   2                      {
  68   3                              Num--;
  69   3                              LCD_ShowNum(1,1,Num,5);
  70   3                      }
  71   2                      if(KeyNum==3)   //K3按键，向AT24C02写入数据
  72   2                      {
  73   3                              AT24C02_WriteByte(0,Num%256);
  74   3                              Delay(5);
  75   3                              AT24C02_WriteByte(1,Num/256);
  76   3                              Delay(5);
  77   3                              LCD_ShowString(2,1,"Write OK");
  78   3                              Delay(1000);
  79   3                              LCD_ShowString(2,1,"        ");
  80   3                      }
  81   2                      if(KeyNum==4)   //K4按键，从AT24C02读取数据
  82   2                      {
  83   3                              Num=AT24C02_ReadByte(0);
  84   3                              Num|=AT24C02_ReadByte(1)<<8;
  85   3                              LCD_ShowNum(1,1,Num,5);
  86   3                              LCD_ShowString(2,1,"Read OK ");
  87   3                              Delay(1000);
  88   3                              LCD_ShowString(2,1,"        ");
  89   3                      }
  90   2              }
  91   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    223    ----
   CONSTANT SIZE    =     27    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
